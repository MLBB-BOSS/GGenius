/* ===== GGENIUS REVOLUTION - PERFORMANCE OPTIMIZED CSS ===== */
/* @version 2.0.2 */

/* Critical CSS Variables - Optimized for Performance */
:root {
    /* Core Colors */
    --bg-1: #0a0c0f; --bg-2: #14181e; --bg-3: #252a32; --surface: #1a1d23;
    --text-1: #fff; --text-2: #b0c4de; --text-3: #8899a6;
    --blue: #007bff; --yellow: #ffc107; --cyan: #00d4ff; --purple: #a55eea;
    --green: #00ff88; --pink: #ff073a; --electric: #bf00ff; --matrix: #39ff14;

    /* RGB versions for rgba() */
    --bg-1-rgb: 10, 12, 15;
    --bg-2-rgb: 20, 24, 30;
    --blue-rgb: 0, 123, 255;
    --yellow-rgb: 255, 193, 7;
    --cyan-rgb: 0, 212, 255;
    --purple-rgb: 165, 94, 234;
    --pink-rgb: 255, 7, 58;
    --electric-rgb: 191, 0, 255;
    
    /* Performance Gradients */
    --g1: linear-gradient(135deg, var(--cyan), var(--purple));
    --g2: linear-gradient(135deg, var(--cyan), var(--electric), var(--pink));
    --g3: linear-gradient(135deg, var(--blue), color-mix(in srgb, var(--blue) 70%, var(--purple) 30%));
    --g-bg: linear-gradient(145deg, var(--bg-1) 0%, #0d1014 50%, #080a0c 100%);
    --g-holo: linear-gradient(45deg, rgba(var(--cyan-rgb),.3), transparent, rgba(var(--cyan-rgb),.3));
    
    /* Typography Scale */
    --f1: 'Exo 2', system-ui, sans-serif; --f2: 'Open Sans', system-ui, sans-serif;
    --t-xs: clamp(.75rem,1vw,.875rem); --t-s: clamp(.875rem,1.2vw,1rem);
    --t-base: clamp(1rem,1.5vw,1.125rem); --t-l: clamp(1.125rem,2vw,1.25rem);
    --t-xl: clamp(1.25rem,2.5vw,1.5rem); --t-2xl: clamp(1.5rem,3vw,2rem);
    --t-3xl: clamp(2rem,4vw,3rem); --t-4xl: clamp(2.5rem,5vw,4rem);
    
    /* Layout & Performance */
    --container: min(1140px, 100vw - 2rem); --header-h: 4.375rem;
    --s-xs: .5rem; --s-s: 1rem; --s-m: 1.5rem; --s-l: 2rem; --s-xl: 3rem; --s-2xl: 4rem;
    --r-s: 4px; --r-m: 8px; --r-l: 12px; --r-xl: 24px;
    
    /* Effects & Shadows */
    --shadow-cyber: 0 0 20px rgba(var(--cyan-rgb),.5);
    --shadow-neon: 0 0 25px rgba(var(--yellow-rgb),.4);
    --shadow-glow: 0 10px 30px rgba(var(--cyan-rgb),.3);
    --static-shadow-light: 0 2px 5px rgba(0,0,0,0.2);
    --trans: .3s cubic-bezier(.4,0,.2,1); --trans-fast: .15s ease-out;
    
    /* Z-index Scale */
    --z-bg: -1; --z-normal: 1; --z-high: 10; --z-sticky: 100; --z-modal: 1000; --z-max: 9999;
    
    /* Performance control */
    --hero-overlay-intensity: 0.4;
    --animation-duration-factor: 1; /* Multiplier for animation durations */
    --blur-intensity: 15px;
    --blur-intensity-light: 10px;
    --blur-intensity-mobile: 5px;
}

/* Performance Mode Active: Applied to body by JS */
.performance-mode-active {
    --hero-overlay-intensity: 0.05; /* Greatly reduce intensity */
    --animation-duration-factor: 0.1; /* Significantly speed up or effectively disable animations */
    --blur-intensity: 0px !important; /* Disable blur */
    --blur-intensity-light: 0px !important;
    --blur-intensity-mobile: 0px !important;

    & .gaming-cursor { display: none !important; }
    & * {
        backdrop-filter: none !important;
        /* text-shadow: none !important; /* Optional: disable text shadows */
    }
    & .hero-section::after {
        animation: none !important;
        background-image: radial-gradient(circle at 15% 25%,rgba(var(--cyan-rgb),0.05) 1px,transparent 1px) !important; /* Minimalistic fallback */
        mix-blend-mode: normal !important;
        opacity: var(--hero-overlay-intensity) !important;
    }
    & .site-header {
        background-color: rgba(var(--bg-1-rgb), 0.95) !important; /* Solid fallback */
    }
    & .feature-card-iui.enhanced::before,
    & .feature-card-iui.enhanced::after {
        animation: none !important;
        background: none !important;
        display: none !important; /* Hide rotating borders */
    }
    & .feature-card-iui.enhanced:hover {
        transform: translateY(-5px) scale(1.02) !important;
        box-shadow: 0 10px 20px rgba(0,0,0,.3) !important;
    }
    & .animated-heavy-shadow { /* Class for elements with animated box-shadow */
        animation-name: none !important;
        box-shadow: var(--static-shadow-light) !important; /* Fallback to a light static shadow */
    }
    & .hero-stats,
    & .timeline-marker,
    & .roadmap-timeline::before { /* Disable specific heavy animations */
        animation: none !important;
        box-shadow: var(--static-shadow-light) !important;
    }
    & .music-toggle {
        backdrop-filter: none !important;
        background-color: var(--bg-2) !important;
    }
}


/* High Performance Reset */
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html{scroll-behavior:smooth;height:100%;font-size:100%;-webkit-tap-highlight-color:transparent;}
body{
    font-family:var(--f2);background:var(--g-bg);color:var(--text-1);line-height:1.7;
    -webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;overflow-x:hidden;
    padding-top:var(--header-h);min-height:100vh;contain:layout style paint; /* Add paint */
}

/* Critical Above-the-Fold Background */
body::before{
    content:'';position:fixed;inset:0;z-index:var(--z-bg);pointer-events:none;contain:strict;
    background:radial-gradient(circle at 15% 85%,color-mix(in srgb,var(--blue) 8%,transparent),transparent 40%),
    radial-gradient(circle at 85% 15%,color-mix(in srgb,var(--yellow) 8%,transparent),transparent 40%),
    radial-gradient(circle at 50% 50%,color-mix(in srgb,var(--purple) 5%,transparent),transparent 50%);
    animation:bgMove calc(25s * (1 / var(--animation-duration-factor))) ease-in-out infinite alternate;
    will-change:transform;
}

/* Critical Loading Screen */
.loading-screen{
    /* ... (no major changes, ensure transitions are smooth) ... */
    position:fixed;inset:0;background:var(--bg-1);display:flex;align-items:center;
    justify-content:center;z-index:var(--z-max);opacity:1;visibility:visible;
    transition:opacity .5s,visibility .5s;contain:strict;
    transition-duration: calc(.5s * var(--animation-duration-factor));
}
.spinner-ring{
    /* ... */
    animation:spin calc(1s * (1 / var(--animation-duration-factor))) linear infinite;
}
.loading-text{
    /* ... */
    animation:pulse calc(1.5s * (1 / var(--animation-duration-factor))) ease-in-out infinite;
}

/* Performance Optimized Scroll Progress */
.scroll-progress{
    position:fixed;top:0;left:0;width:0;height:3px;background:var(--g1);
    z-index:var(--z-sticky);transition:width .1s linear; /* Use linear for direct mapping */
    box-shadow:var(--shadow-cyber);
    will-change:width;
}

/* Gaming Cursor (Disabled in performance mode via .performance-mode-active) */
.gaming-cursor{
    position:fixed;width:1.25rem;height:1.25rem;pointer-events:none;z-index:var(--z-max); /* Ensure it's on top */
    mix-blend-mode:difference;transition:transform var(--trans-fast);contain:layout;
    will-change:transform;
    opacity: 1; /* Ensure visible by default */
}
/* ... (cursor-dot, cursor-ring styles) ... */
.gaming-cursor.hover-interactive .cursor-ring { transform: translate(-50%, -50%) scale(1.5); }
.gaming-cursor.clicked .cursor-ring { transform: translate(-50%, -50%) scale(0.8); }


/* Skip Links for Accessibility */
/* ... (no major changes) ... */

/* Container System */
/* ... (no major changes) ... */

/* Typography Hierarchy */
/* ... (no major changes, text-wrap: balance/pretty is good) ... */

/* Enhanced Links */
/* ... (no major changes) ... */

/* Critical Header Performance */
.site-header{
    background:color-mix(in srgb,var(--bg-1) 90%,transparent);
    backdrop-filter:blur(var(--blur-intensity)); /* Use variable */
    border-bottom:1px solid color-mix(in srgb,white 5%,transparent);position:fixed;
    top:0;left:0;right:0;z-index:var(--z-sticky);height:var(--header-h);display:flex;
    align-items:center;transition:background var(--trans), backdrop-filter var(--trans);
    contain:layout style paint; /* Add paint */
    will-change:transform, background-color, backdrop-filter;
    transition-duration: calc(var(--trans) * var(--animation-duration-factor));
}
.site-header.scrolled{
    background:color-mix(in srgb,var(--bg-1) 95%,transparent);
    box-shadow:var(--shadow-md);
}
/* ... (header-container, logo styles) ... */

/* Navigation Optimized */
/* ... (no major changes, ensure transitions respect --animation-duration-factor) ... */
.hamburger-line{
    /* ... */
    transition:all calc(var(--trans) * var(--animation-duration-factor));
}
.nav-link::after{
    /* ... */
    transition:width calc(var(--trans) * var(--animation-duration-factor));
}


/* Hero Section - Critical Performance */
.hero-section{
    min-height:calc(100vh - var(--header-h));padding:var(--s-xl) 0;display:flex;
    align-items:center;position:relative;contain:layout paint; /* Add paint */
    overflow:hidden; /* Important */
}
/* This ::after is very performance intensive. It's heavily simplified/disabled in .performance-mode-active */
.hero-section::after{
    content:'';position:absolute;inset:0;z-index:0; /* Behind hero content */
    mix-blend-mode:screen; 
    opacity:var(--hero-overlay-intensity);
    background-image:radial-gradient(circle at 15% 25%,var(--cyan) 1px,transparent 1px),
                     radial-gradient(circle at 85% 75%,var(--pink) 1px,transparent 1px),
                     radial-gradient(circle at 45% 15%,var(--electric) 1px,transparent 1px);
    background-size:100px 100px,150px 150px,70px 70px; /* Slightly reduced complexity */
    /* cyberpunkShift (background-position) is too slow. Consider opacity pulse or transform on a pseudo-element */
    animation:neuralPulse calc(15s * (1 / var(--animation-duration-factor))) ease-in-out infinite alternate;
    will-change:opacity; /* Only animate opacity if cyberpunkShift is removed */
}
/* ... (hero-content, logo-container, hero-title, subtitle, actions styles) ... */
/* Ensure heroSlideIn animation uses transform and opacity */
@keyframes heroSlideIn{ from { opacity:0; transform: translateY(20px); } to{opacity:1;transform:translateY(0)} }


/* CTA Buttons - Performance Optimized */
/* ... (ensure transitions respect --animation-duration-factor) ... */
.cta-button {
    /* ... */
    transition:all calc(var(--trans) * var(--animation-duration-factor));
    will-change:transform, box-shadow, border-color; /* Added border-color */
}
.cta-button.hero-cta{
    /* animation:pulseGlow 2.5s infinite ease-in-out 1s; /* Animates box-shadow, potentially heavy */
    /* Add .animated-heavy-shadow or simplify animation */
}

/* Hero Stats - Performance Critical */
.hero-stats{
    /* ... */
    backdrop-filter:blur(var(--blur-intensity-light)); /* Use variable */
    /* animation: statsContainer ...; /* Removed, was animating box-shadow */
    /* Add .animated-heavy-shadow if re-enabling complex shadow animations */
}
/* ... (stat-item, stat-number, stat-label styles) ... */
.hero-stats .stat-number{
    /* animation:numberGlow ...; /* Animates filter:brightness - can be okay, monitor */
}


/* Features Section */
.features-section-iui.enhanced{
    backdrop-filter:blur(var(--blur-intensity-light));
}
.category-tab{
    backdrop-filter:blur(var(--blur-intensity));
}
.feature-card-iui.enhanced{
    backdrop-filter:blur(var(--blur-intensity-heavy));
}
.feature-card-iui.enhanced::before{ /* Rotating border */
    animation:borderRotate calc(6s * (1 / var(--animation-duration-factor))) linear infinite;
}
/* ... (other feature styles, ensure transitions respect factor) ... */


/* Roadmap Section */
.roadmap-timeline::before{ /* Animated box-shadow */
    /* animation:timelinePulse ...; */
    /* Add .animated-heavy-shadow */
    box-shadow: 0 0 15px var(--cyan), inset 0 0 5px rgba(255,255,255,.1); /* Static fallback */
}
.timeline-marker{ /* Animated box-shadow */
    /* animation:markerGlow ...; */
    /* Add .animated-heavy-shadow */
    box-shadow: 0 0 20px var(--cyan), inset 0 0 10px rgba(255,255,255,.1); /* Static fallback */
}
.timeline-content{
    backdrop-filter:blur(var(--blur-intensity-heavy));
}
/* ... (other roadmap styles) ... */


/* Accordion Sections */
/* ... (ensure transitions respect factor) ... */
.accordion-indicator{
    transition:transform calc(var(--trans) * var(--animation-duration-factor));
}
.accordion-content{
    transition:max-height calc(.5s * var(--animation-duration-factor)) ease-out;
}

/* Tech Stack Enhanced */
.tech-stack-section.enhanced{
    backdrop-filter:blur(var(--blur-intensity-heavy));
}
.tech-category{
    backdrop-filter:blur(var(--blur-intensity-heavy));
}
/* ... (other tech stack styles) ... */


/* Contact Section Enhanced */
.contact-section.enhanced{
    backdrop-filter:blur(var(--blur-intensity-heavy));
}
.contact-link{
    backdrop-filter:blur(var(--blur-intensity-light));
}
.newsletter-signup{
    backdrop-filter:blur(var(--blur-intensity-heavy));
}
.newsletter-signup.enhanced::before{ /* Rotating border */
     animation:borderRotate calc(10s * (1 / var(--animation-duration-factor))) linear infinite;
}
.newsletter-form input,.form-select{
    backdrop-filter:blur(var(--blur-intensity-light));
}
/* ... (other contact styles) ... */

/* Visually Hidden Utility */
/* ... (no changes) ... */

/* Toast Notifications */
/* ... (ensure transitions respect factor) ... */
.toast{
    transition:transform calc(var(--trans) * var(--animation-duration-factor));
}

/* SVG Logo Enhancements */
/* ... (ensure animations respect factor or are simple enough) ... */
#ggeniusAnimatedLogo{ /* Ensure this is not too complex */ }


/* Animations - Performance Optimized */
/* Modify durations using var(--animation-duration-factor) */
@keyframes spin{to{transform:rotate(360deg)}} /* OK */
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.5}} /* OK */
@keyframes bgMove{0%,100%{transform:scale(1)}50%{transform:scale(1.05)}} /* OK */
@keyframes neuralPulse{0%,100%{opacity:.3;transform:scale(1)}50%{opacity:.6;transform:scale(1.05)}} /* OK for opacity, avoid if it was for cyberpunkShift */
/* @keyframes cyberpunkShift{to{background-position:120px 120px,...}} /* REMOVED/REPLACED - too expensive */
@keyframes titleGlow{0%,100%{text-shadow:0 0 20px var(--cyan)}50%{text-shadow:0 0 40px var(--pink),0 0 60px var(--electric)}} /* Text shadow animation can be heavy */
/* @keyframes pulseGlow{...} /* Was for CTA, review if it animates box-shadow */
/* @keyframes statsContainer{...} /* Was for hero-stats, removed due to box-shadow animation */
@keyframes numberGlow{0%,100%{filter:brightness(1)}50%{filter:brightness(1.2) saturate(1.3)}} /* Filter animation can be okay, monitor */
@keyframes borderRotate{to{transform:rotate(360deg)}} /* OK */
@keyframes statusGlow{0%,100%{opacity:.8}50%{opacity:1;filter:brightness(1.2)}} /* OK */
@keyframes tabFadeIn{from{opacity:0;transform:translateY(20px) scale(.98)}to{opacity:1;transform:translateY(0) scale(1)}} /* OK */

/* @keyframes timelinePulse - Replaced with static shadow + .animated-heavy-shadow class for JS control */
/* @keyframes markerGlow - Replaced with static shadow + .animated-heavy-shadow class for JS control */

@keyframes toastProgress{from{transform:scaleY(1)}to{transform:scaleY(0)}} /* OK */
/* ... (SVG animations, ensure they are simple or respect factor) ... */


/* Ripple Effect (JS creates .ripple-effect) */
.ripple-effect {
    position: absolute;
    border-radius: 50%;
    background: rgba(var(--blue-rgb), 0.2); /* Slightly less opacity */
    transform: scale(0);
    animation: ripple calc(600ms * var(--animation-duration-factor)) ease-out forwards;
    pointer-events: none;
    z-index: 1; 
}
@keyframes ripple {
    to {
        transform: scale(3.5); /* Adjusted scale */
        opacity: 0;
    }
}

/* Custom Context Menu (JS creates .context-menu) */
.context-menu {
    position: fixed; /* JS will set top/left */
    background-color: var(--bg-2);
    border: 1px solid var(--surface);
    border-radius: var(--r-m);
    box-shadow: var(--shadow-md);
    padding: var(--s-xs) 0;
    min-width: 220px; /* Slightly wider */
    z-index: var(--z-max); 
    opacity: 0;
    transform: scale(0.95);
    animation: contextMenuFadeIn calc(0.2s * var(--animation-duration-factor)) ease-out forwards;
}
@keyframes contextMenuFadeIn {
    to {
        opacity: 1;
        transform: scale(1);
    }
}
.context-menu-item {
    padding: var(--s-s) var(--s-m);
    cursor: pointer;
    font-size: var(--t-s);
    color: var(--text-2);
    display: flex;
    align-items: center;
    gap: var(--s-s); /* Increased gap */
    transition: background-color calc(0.15s * var(--animation-duration-factor)), color calc(0.15s * var(--animation-duration-factor));
}
.context-menu-item:hover,
.context-menu-item:focus, /* Added :focus for keyboard nav */
.context-menu-item:focus-visible {
    background-color: var(--surface);
    color: var(--text-1);
    outline: none;
}
.context-menu-item .menu-icon { /* Ensure icons are styled */
    font-size: var(--t-base); 
    opacity: 0.8;
    color: var(--blue); /* Example color */
}


/* Install Banner (JS creates .install-banner) */
.install-banner {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    background-color: var(--bg-3);
    color: var(--text-1);
    padding: var(--s-m);
    box-shadow: 0 -2px 10px rgba(0,0,0,0.3);
    z-index: var(--z-modal);
    transform: translateY(100%);
    animation: slideInUpBanner calc(0.5s * var(--animation-duration-factor)) ease-out forwards;
    contain: layout style paint;
}
.install-banner .install-content {
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-wrap: wrap; /* Allow wrapping on small screens */
    gap: var(--s-s);
    max-width: var(--container);
    margin: 0 auto;
}
.install-banner .install-icon { font-size: 1.8rem; margin-right: var(--s-s); }
.install-banner .install-text { flex-grow: 1; }
.install-banner .install-text strong { display: block; font-size: var(--t-base); margin-bottom: var(--s-xs); }
.install-banner .install-text small { font-size: var(--t-xs); color: var(--text-3); }
.install-banner .install-button { /* Style like .cta-button or specific */
    padding: var(--s-xs) var(--s-m);
    background: var(--blue);
    color: var(--text-1);
    border: none;
    border-radius: var(--r-s);
    cursor: pointer;
}
.install-banner .install-close { 
    background: none; border: none; color: var(--text-1); 
    font-size: 1.5rem; cursor: pointer; padding: var(--s-xs);
    line-height: 1;
}
@keyframes slideInUpBanner { to { transform: translateY(0); } }


/* Music Toggle (JS creates .music-toggle) */
.music-toggle {
    position: fixed;
    bottom: var(--s-l); /* Increased spacing from edge */
    right: var(--s-l);
    background-color: rgba(var(--bg-2-rgb), 0.7);
    color: var(--text-1);
    border: 1px solid var(--surface);
    border-radius: 50%;
    width: 44px; /* Slightly larger */
    height: 44px;
    font-size: 1.5rem; /* Icon size */
    cursor: pointer;
    z-index: var(--z-high);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background-color var(--trans-fast), transform var(--trans-fast);
    backdrop-filter: blur(var(--blur-intensity-mobile)); /* Light blur */
}
.music-toggle:hover {
    background-color: rgba(var(--bg-2-rgb), 0.9);
    transform: scale(1.1);
}


/* Responsive Design - Mobile First */
@media (max-width:768px){
    /* ... (existing mobile styles) ... */
    :root { /* Further reduce blur on mobile by default */
        --blur-intensity: var(--blur-intensity-mobile);
        --blur-intensity-light: calc(var(--blur-intensity-mobile) * 0.7);
    }
    .hero-section::after { /* Simpler version for mobile by default */
        opacity: calc(var(--hero-overlay-intensity) * 0.5);
        background-image: radial-gradient(circle at 20% 30%,rgba(var(--cyan-rgb),0.1) 1px,transparent 1px);
        animation: none; /* Disable complex animations by default on mobile */
    }
    .hero-title{font-size:clamp(2.2rem,7vw,3.5rem)} /* Slightly smaller */

    .install-banner .install-content { flex-direction: column; text-align: center; }
    .install-banner .install-icon { margin-bottom: var(--s-xs); }
    .install-banner .install-button { margin-top: var(--s-s); width: 100%; max-width: 280px; }
}

@media (max-width:480px){
    /* ... (existing small mobile styles) ... */
    .hero-title{font-size:clamp(2rem,6.5vw,3rem)}
}

/* High DPI Displays */
/* ... (no changes, background-size adjustments seem okay) ... */

/* Reduced Motion */
@media (prefers-reduced-motion:reduce){
    *{
        animation-duration: .01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: .01ms !important;
        scroll-behavior: auto !important; /* Disable smooth scroll */
    }
    .hero-section::after,
    body::before { /* Disable background animations */
        animation: none !important;
    }
    .gaming-cursor,
    .music-toggle { /* Hide non-essential interactive elements */
        display: none !important;
    }
    /* Disable any other JS-driven animations or transitions here by targeting specific classes */
}

/* Dark Theme Enhancements (If html[data-theme="dark"] isn't the only mechanism) */
/* ... (current code seems okay if data-theme is primary) ... */

/* Print Styles */
/* ... (no changes) ... */

/* Focus Management */
/* ... (no changes, :focus-visible is good) ... */

/* Performance Utilities (Classes for JS to hook into if needed) */
.will-change-transform{will-change:transform}
.will-change-opacity{will-change:opacity}
/* .gpu-acceleration{transform:translateZ(0)} /* Generally superseded by will-change */
.contain-layout{contain:layout}
.contain-paint{contain:paint}
.contain-strict{contain:strict}
